<!DOCTYPE html>

<html>
<head>
  <title>yako.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>yako.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(root, doc)</span> {</span>
<span class="hljs-pi">    'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>check if there is a previous version</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> _yako = root.yako || <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>};
    <span class="hljs-keyword">var</span> api = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>};
    <span class="hljs-keyword">var</span> yako = root.yako = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(node)</span> {</span>
        <span class="hljs-keyword">var</span> x = <span class="hljs-keyword">new</span> api();
        <span class="hljs-keyword">return</span> x._init(node);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>version</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    yako.VERSION = <span class="hljs-string">'0.0.1'</span>;
    yako.eventList = {};
    yako._graphs = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>to extend properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    yako.extend = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(attr, json)</span> {</span>
        <span class="hljs-keyword">if</span> (!json)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> k = <span class="hljs-built_in">Object</span>.keys(json), len = k.length;
        <span class="hljs-keyword">while</span>(len--) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> json[k[len]] !== <span class="hljs-string">'object'</span> || <span class="hljs-built_in">Object</span>.prototype.toString.call(json[k[len]]) === <span class="hljs-string">'[object Array]'</span>) {
                attr[k[len]] = json[k[len]];
            } <span class="hljs-keyword">else</span> {    <span class="hljs-comment">//it has child objects, copy them too.</span>
                yako.extend(attr[k[len]], json[k[len]]);
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>to assign attributes NS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    yako.assign = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(attr, json)</span> {</span>
        <span class="hljs-keyword">if</span> (!json)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> k = <span class="hljs-built_in">Object</span>.keys(json), len = k.length;
        <span class="hljs-keyword">while</span>(len--) {
            attr.setAttributeNS(<span class="hljs-literal">null</span>, k[len], json[k[len]]);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>check if is function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    yako.isFn = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(object)</span> {</span>
       <span class="hljs-keyword">return</span> !!(object &amp;&amp; object.constructor &amp;&amp; object.call &amp;&amp; object.apply);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>event binding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    yako.on = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(self, node, event, fn, useCapture)</span> {</span>
        <span class="hljs-keyword">var</span> useCapture = useCapture || <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (yako.eventList[node]) {
            <span class="hljs-keyword">if</span> (yako.eventList[node][event]) {
                yako.eventList[node][event].push(fn);
            } <span class="hljs-keyword">else</span> {
                yako.eventList[node][event] = [];
                yako.eventList[node][event].push(fn);
            }
        } <span class="hljs-keyword">else</span> {
            yako.eventList[node] = {};
            yako.eventList[node][event] = [];
            yako.eventList[node][event].push(fn);
        }
        <span class="hljs-keyword">var</span> nodes = self._getNode(node, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">if</span> (nodes &amp;&amp; nodes.tagName) {
            nodes.addEventListener(event, fn, useCapture);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nodes) {
            <span class="hljs-built_in">Array</span>.prototype.filter.call(nodes, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(element)</span> {</span>
                <span class="hljs-keyword">if</span> (element.nodeName) {
                    element.addEventListener(event, fn, useCapture);
                }
            });
        }
        <span class="hljs-keyword">return</span> self;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>event ubinding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    yako.unbind = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(self, node, event, fn)</span> {</span>
        <span class="hljs-keyword">var</span> nodes = self._getNode(node, <span class="hljs-literal">true</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>remove specific event &amp; function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (event &amp;&amp; fn &amp;&amp; yako.isFn(fn)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>check if event exist first &amp;&amp; remove from array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (yako.eventList[node] &amp;&amp; yako.eventList[node][event]) {
                <span class="hljs-keyword">var</span> found = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> yako.eventList[node][event]) {
                    <span class="hljs-keyword">if</span> (yako.eventList[node][event][i] == fn) {
                        yako.eventList[node][event].splice(i,<span class="hljs-number">1</span>);
                        found = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                }
                <span class="hljs-keyword">if</span> (!found) {
                    <span class="hljs-keyword">return</span> self;
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> self;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>remove event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span>(nodes &amp;&amp; nodes.tagName) {
                nodes.removeEventListener(event, fn);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nodes) {
                <span class="hljs-built_in">Array</span>.prototype.filter.call(nodes, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(element)</span> {</span>
                    <span class="hljs-keyword">if</span> (element.nodeName) {
                        element.removeEventListener(event, fn);
                    }
                });
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>remove specific event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event &amp;&amp; yako.eventList[node] &amp;&amp; yako.eventList[node][event]) {
            <span class="hljs-keyword">var</span> keys = yako.eventList[node][event], len = keys.length;
            <span class="hljs-keyword">while</span> (len--) {
                <span class="hljs-keyword">if</span>(nodes &amp;&amp; nodes.tagName) {
                    nodes.removeEventListener(event, keys[len]);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nodes) {
                    <span class="hljs-built_in">Array</span>.prototype.filter.call(nodes, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(element)</span> {</span>
                        <span class="hljs-keyword">if</span> (element.nodeName) {
                            element.removeEventListener(event, keys[len]);
                        }
                    });
                }
            }
            yako.eventList[node][event] = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>remove all event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (yako.eventList[node] &amp;&amp; nodes) {
                <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(yako.eventList[node]), len = keys.length;
                <span class="hljs-keyword">while</span> (len--) {
                    <span class="hljs-keyword">var</span> fns = yako.eventList[node][keys[len]];
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> fns) {
                        <span class="hljs-keyword">if</span> (nodes &amp;&amp; nodes.tagName) {
                            nodes.removeEventListener(keys[len], fns[i]);
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nodes) {
                            <span class="hljs-built_in">Array</span>.prototype.filter.call(nodes, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(element)</span> {</span>
                                <span class="hljs-keyword">if</span> (element.nodeName) {
                                    element.removeEventListener(keys[len], fns[i]);
                                }
                            });
                        }
                    }
                    yako.eventList[node][keys[len]] = [];
                }
            }
        }
        <span class="hljs-keyword">return</span> self;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>for registering a module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    yako.register = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(graphName, prototypes)</span> {</span>
        <span class="hljs-keyword">if</span> (yako._graphs &amp;&amp; yako._graphs[graphName])
            <span class="hljs-keyword">throw</span> <span class="hljs-string">'Uncaught Exception: graph module conflict for '</span>+ graphName;
        yako._graphs[graphName] = prototypes;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>extend prototype + allow chaining on public functions and most private functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    yako.extend(api.prototype, {
        extend: yako.extend,
        assign: yako.assign,</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>init function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(node)</span> {</span>
            <span class="hljs-keyword">this</span>.attributes = {};
            <span class="hljs-keyword">this</span>._graphs = {};
            <span class="hljs-keyword">this</span>._getNode(node);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },
        _getElement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(obj, node)</span> {</span>
            <span class="hljs-keyword">if</span>(node.match(<span class="hljs-regexp">/^#/</span>))
                <span class="hljs-keyword">return</span> obj.getElementById(node.replace(<span class="hljs-regexp">/^#/</span>,<span class="hljs-string">''</span>));
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (node.match(<span class="hljs-regexp">/^\./</span>))
                <span class="hljs-keyword">return</span> obj.getElementsByClassName(node.replace(<span class="hljs-regexp">/^\./</span>,<span class="hljs-string">''</span>));
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">return</span> obj.getElementsByTagName(node);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>retrieving parent node
TODO:: Update to support, current nesting only supports #ID &gt; Class or #ID &gt; #ID &gt; … &gt; Class 
.class .class</p>
<h1 id="id-class-done-">id .class [Done]</h1>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _getNode: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(node, raw, opts)</span> {</span>
            <span class="hljs-keyword">var</span> element;
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.toString.call(node)===<span class="hljs-string">'[object Array]'</span> || node.tagName) {
                <span class="hljs-keyword">var</span> arr = opts.split(<span class="hljs-string">' '</span>);
                <span class="hljs-keyword">if</span>(arr.length &gt; <span class="hljs-number">1</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getNode(<span class="hljs-keyword">this</span>._getElement(node, arr.shift()), <span class="hljs-literal">null</span>, arr.join(<span class="hljs-string">','</span>,<span class="hljs-string">' '</span>));
                <span class="hljs-keyword">else</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getElement(node, arr.shift());
            }
            <span class="hljs-keyword">if</span> (node.split(<span class="hljs-string">' '</span>).length &gt; <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">var</span> arr = node.split(<span class="hljs-string">' '</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getNode(<span class="hljs-keyword">this</span>._getElement(doc, arr.shift()),<span class="hljs-literal">null</span>, arr.join(<span class="hljs-string">','</span>,<span class="hljs-string">' '</span>));
            } <span class="hljs-keyword">else</span> {
                element = <span class="hljs-keyword">this</span>._getElement(doc, node);
            }
            <span class="hljs-keyword">if</span> (raw) {
                <span class="hljs-keyword">return</span> element;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.element = element;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>return (this.element !== null ? this : (throw ‘Uncaught Node Element: ‘+ node + ‘ is null’));</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        },</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>building svg elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _make: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(tag, props, data)</span> {</span>
            <span class="hljs-keyword">var</span> node = doc.createElementNS(<span class="hljs-string">'http://www.w3.org/2000/svg'</span>,tag);
            <span class="hljs-keyword">this</span>.assign(node,props);
            <span class="hljs-keyword">this</span>.extend(node.dataset, data);
            <span class="hljs-keyword">return</span> node;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>appends the elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _compile : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(node, childs, reRender)</span> {</span>
            <span class="hljs-keyword">if</span> (childs === <span class="hljs-literal">null</span> ^ childs === <span class="hljs-literal">undefined</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> childs === <span class="hljs-built_in">Object</span>) childs = [childs];
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.toString.call(childs)===<span class="hljs-string">'[object Array]'</span>) {
                <span class="hljs-keyword">if</span> (node.tagName) {
                    <span class="hljs-keyword">if</span>(reRender)
                        node.innerHTML = <span class="hljs-string">''</span>;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> childs)
                        node.appendChild(childs[i]);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-built_in">Array</span>.prototype.filter.call(node, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(element)</span> {</span>
                        <span class="hljs-keyword">if</span> (element.nodeName) {
                            <span class="hljs-keyword">if</span>(reRender)
                                element.innerHTML = <span class="hljs-string">''</span>;
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> childs)
                                element.appendChild(childs[i]);
                        }
                    });
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (node.tagName) {
                    <span class="hljs-keyword">if</span>(reRender)
                        node.innerHTML = <span class="hljs-string">''</span>;
                    node.appendChild(childs);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-built_in">Array</span>.prototype.filter.call(node, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(element)</span> {</span>
                        <span class="hljs-keyword">if</span> (element.nodeName) {
                            <span class="hljs-keyword">if</span>(reRender)
                                element.innerHTML = <span class="hljs-string">''</span>;
                            element.appendChild(childs[i]);
                        }
                    });
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>svg path builder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _path : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data, opts, interval, heightRatio)</span> {</span>
            <span class="hljs-keyword">var</span> pathToken = <span class="hljs-string">""</span>,
                shift = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> (opts._shift)
                shift = <span class="hljs-number">100</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>path generator</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;data.data.length; i++) {
                <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span>) {
                    pathToken += <span class="hljs-string">'M '</span>+(interval*i+<span class="hljs-built_in">parseInt</span>(shift))+<span class="hljs-string">' '</span>+ (opts.chart.height - (data.data[i] * heightRatio) - shift);
                } <span class="hljs-keyword">else</span> {
                    pathToken += <span class="hljs-string">' L '</span>+(interval*i+<span class="hljs-built_in">parseInt</span>(shift))+<span class="hljs-string">' '</span>+ (opts.chart.height - (data.data[i] * heightRatio) - shift);
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._make(<span class="hljs-string">'path'</span>,{
                fill: <span class="hljs-string">'none'</span>,
                d: pathToken,</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>if stroke is not define, generate a random color!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                stroke: data.color || <span class="hljs-string">'#'</span>+(<span class="hljs-built_in">Math</span>.random()*<span class="hljs-number">0xFFFFFF</span>&lt;&lt;<span class="hljs-number">0</span>).toString(<span class="hljs-number">16</span>),
                <span class="hljs-string">'stroke-width'</span>: <span class="hljs-string">'2'</span>,
                <span class="hljs-string">'stroke-linejoin'</span>: <span class="hljs-string">'round'</span>,
                <span class="hljs-string">'stroke-linecap'</span>: <span class="hljs-string">'round'</span>,
                <span class="hljs-string">'z-index'</span>: <span class="hljs-number">1</span>
            },{
                label: data.label
            });
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>svg circle builder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _circle : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data, opts, interval, heightRatio)</span> {</span>
            <span class="hljs-keyword">var</span> circles = [],
                shift = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> (opts._shift)
                shift = <span class="hljs-number">100</span>;
            <span class="hljs-keyword">if</span> (opts.chart.showPointer === <span class="hljs-literal">false</span>)
                <span class="hljs-keyword">return</span> circles;

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;data.data.length;i++) {
                circles.push(<span class="hljs-keyword">this</span>._make(<span class="hljs-string">'circle'</span>,{
                    fill: data.nodeColor || <span class="hljs-string">'red'</span>,
                    r: <span class="hljs-number">5</span>,
                    cx: (interval*i + <span class="hljs-built_in">parseInt</span>(shift)),
                    cy: (opts.chart.height - (data.data[i] * heightRatio) - shift),
                    <span class="hljs-keyword">class</span>: <span class="hljs-string">'graphData'</span>,
                    <span class="hljs-string">'z-index'</span>: <span class="hljs-number">3</span>
                },{
                    info: <span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-built_in">JSON</span>.stringify({
                        data : data.data[i],
                        label : data.label || <span class="hljs-string">''</span>,
                        interval : interval * i,
                        cx: (interval *i + <span class="hljs-built_in">parseInt</span>(shift)),
                        cy: (opts.chart.height - (data.data[i] * heightRatio) - shift)
                    }))
                }));
            }
            <span class="hljs-keyword">return</span> circles;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>computes and distributes the label</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _label: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data, opts, interval, heightRatio, min, max)</span> {</span>
            <span class="hljs-keyword">if</span> (!opts._shift) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> height = opts.chart.height - <span class="hljs-number">100</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>yAxis
TODO:: Automatic rounding to nearest 2 sig figs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> i = <span class="hljs-number">4</span>,
                arr = [];
            <span class="hljs-keyword">while</span>(i--) {
                <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">var</span> x = <span class="hljs-keyword">this</span>._make(<span class="hljs-string">'text'</span>,{
                    y: height - ((height/ <span class="hljs-number">4</span>) * i),
                    x: <span class="hljs-number">0</span>,
                    <span class="hljs-string">'font-size'</span>: <span class="hljs-number">15</span>,
                    <span class="hljs-string">'font-family'</span>: <span class="hljs-string">'"Open Sans", sans-serif'</span>,
                });
                x.innerHTML = ((max/<span class="hljs-number">4</span>)*i).toFixed(<span class="hljs-number">0</span>);
                arr.push(x);
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Accepted xAxis - [1-9]s, [1-9]m, [1-9]h, [1-9]D, [1-9]M, [1-9]Y</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> len = data[<span class="hljs-number">0</span>].data.length,
                ints = opts.xAxis.interval,
                formatSpec = <span class="hljs-string">''</span>,
                format = {
                    tickInterval: (ints.match(<span class="hljs-regexp">/\d+/</span>) &amp;&amp; ints.match(<span class="hljs-regexp">/\d+/</span>).length ? ints.match(<span class="hljs-regexp">/\d+/</span>)[<span class="hljs-number">0</span>] : <span class="hljs-number">1</span>)
                },
                s = <span class="hljs-number">60</span>,
                m = <span class="hljs-number">60</span>,
                h = <span class="hljs-number">24</span>,
                D = <span class="hljs-number">30</span>,
                M = <span class="hljs-number">12</span>,
                Y = <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>what to do if the interval and format dont match
eg: given 1D interval and its requesting a format of per hour
should it be a straight line for that period ?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (opts.xAxis.format === <span class="hljs-string">'dateTime'</span>) {
                <span class="hljs-keyword">if</span> (opts.xAxis.dateTimeLabelFormat.match(<span class="hljs-string">'ss'</span>)) {
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'s$'</span>))
                        format.tickSize = <span class="hljs-number">1</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (opts.xAxis.dateTimeLabelFormat.match(<span class="hljs-string">'mm'</span>)) {
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'s$'</span>))
                        format.tickSize = s * m;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'m$'</span>))
                        format.tickSize = <span class="hljs-number">1</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (opts.xAxis.dateTimeLabelFormat.match(<span class="hljs-string">'hh'</span>)) {
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'s$'</span>))
                        format.tickSize = s * m;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'m$'</span>))
                        format.tickSize = m;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'h$'</span>))
                        format.tickSize = <span class="hljs-number">1</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (opts.xAxis.dateTimeLabelFormat.match(<span class="hljs-string">'DD'</span>)) {
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'s$'</span>))
                        format.tickSize = s * m * h;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'m$'</span>))
                        format.tickSize = m * h;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'h$'</span>))
                        format.tickSize = h;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'D$'</span>))
                        format.tickSize = <span class="hljs-number">1</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (opts.xAxis.dateTimeLabelFormat.match(<span class="hljs-string">'MM'</span>)) {
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'s$'</span>))
                        format.tickSize = s * m * h * D;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'m$'</span>))
                        format.tickSize = m * h * D;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'h$'</span>))
                        format.tickSize = h * D;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'D$'</span>))
                        format.tickSize = D;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'M$'</span>))
                        format.tickSize = <span class="hljs-number">1</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (opts.xAxis.dateTimeLabelFormat.match(<span class="hljs-string">'YY'</span>)) {
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'s$'</span>))
                        format.tickSize = s * m * h * D * M;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'m$'</span>))
                        format.tickSize = m * h * D * M;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'h$'</span>))
                        format.tickSize = h * D * M;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'D$'</span>))
                        format.tickSize = D * M;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'M$'</span>))
                        format.tickSize = M;
                    <span class="hljs-keyword">if</span> (ints.match(<span class="hljs-string">'Y$'</span>))
                        format.tickSize = Y;
                }

                <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>,
                    counter = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">while</span> (len--) {
                    counter++;
                    <span class="hljs-keyword">if</span> (format.tickSize*format.tickInterval === counter || i === <span class="hljs-number">0</span>) {
                        <span class="hljs-keyword">var</span> x = <span class="hljs-keyword">this</span>._make(<span class="hljs-string">'text'</span>,{
                            y: height + <span class="hljs-number">50</span>,
                            x: <span class="hljs-number">100</span> + interval * i,
                            <span class="hljs-string">'font-size'</span>: <span class="hljs-number">15</span>,
                            <span class="hljs-string">'font-family'</span>: <span class="hljs-string">'"Open Sans", sans-serif'</span>,
                        });
                        x.innerHTML = (interval * i).toFixed(<span class="hljs-number">0</span>);
                        arr.push(x);
                        <span class="hljs-keyword">if</span> (i !== <span class="hljs-number">0</span> || format.tickSize === counter)
                            counter = <span class="hljs-number">0</span>;
                    }
                    i++;
                }
            }
            <span class="hljs-keyword">return</span> arr;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>sig fig rounding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _sigFigs: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(n, sig)</span> {</span>
            <span class="hljs-keyword">var</span> mult = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">10</span>,
                sig - <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.log(n) / <span class="hljs-built_in">Math</span>.LN10) - <span class="hljs-number">1</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.round(n * mult) / mult;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>finding min &amp; max between multiple set (any improvments to multiple array search)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _findMixMax: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data)</span> {</span>
            <span class="hljs-keyword">var</span> min, max, length;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareNumbers</span><span class="hljs-params">(a, b)</span> {</span>
              <span class="hljs-keyword">return</span> a - b;
            }

            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.toString.call(data)!==<span class="hljs-string">'[object Array]'</span>) {
                data = [data];
            }

            max = min = data[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];
            length = data[<span class="hljs-number">0</span>].length;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> data) {
                <span class="hljs-keyword">var</span> _data = (data[i].slice()).sort(compareNumbers);
                length = (length &lt; _data.length ? _data.length : length);
                min = (min &gt; _data[<span class="hljs-number">0</span>] ? _data[<span class="hljs-number">0</span>]: min);
                max = (max &lt; _data[_data.length-<span class="hljs-number">1</span>] ? _data[_data.length-<span class="hljs-number">1</span>] : max);
            }
            <span class="hljs-keyword">return</span> {
                min: min,
                max: max,
                len: length
            };
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>the parent svg builder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _generate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(reRender)</span> {</span>
            <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>.attributes.data,
                opts = <span class="hljs-keyword">this</span>.attributes.opts,
                svg = <span class="hljs-keyword">this</span>._make(<span class="hljs-string">'svg'</span>,{
                    width : opts.chart.width,
                    height : opts.chart.height
                }),
                sets = [],
                reRender = reRender || <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.toString.call(data) !== <span class="hljs-string">'[object Array]'</span>) {
                data = [data];
            }
    
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> data) {
                sets.push(data[i].data);
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>find min / max point
assume all data are positive for now;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> _tmp = <span class="hljs-keyword">this</span>._findMixMax(sets),
            min = _tmp.min,
            max = _tmp.max,     <span class="hljs-comment">//need to round to nearest 100?</span>
            interval = opts.chart.width / (_tmp.len -<span class="hljs-number">1</span>),
            heightRatio = (opts.chart.height / (max+<span class="hljs-number">10</span>));

            <span class="hljs-keyword">if</span> (opts.xAxis.format) {
                <span class="hljs-keyword">if</span> (opts.xAxis.format === <span class="hljs-string">'dateTime'</span>) {
                    <span class="hljs-keyword">if</span> (opts.chart.width - <span class="hljs-number">100</span> &lt;= <span class="hljs-number">0</span> || opts.chart.height - <span class="hljs-number">100</span> &lt;= <span class="hljs-number">0</span>)
                        console.warn(<span class="hljs-string">'insufficent width or height (min 100px for labels), ignored format: '</span> +opts.xAxis.format);
                    <span class="hljs-keyword">else</span> {
                        interval = (opts.chart.width - <span class="hljs-number">100</span>) / (_tmp.len-<span class="hljs-number">1</span>);
                        heightRatio = (opts.chart.height - <span class="hljs-number">100</span>) / (max+<span class="hljs-number">10</span>);
                        opts._shift = <span class="hljs-literal">true</span>;
                    }
                }
            }

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> data) {
                <span class="hljs-keyword">var</span> g = <span class="hljs-keyword">this</span>._make(<span class="hljs-string">'g'</span>,<span class="hljs-literal">null</span>,{
                    label: data[i].label
                });
                <span class="hljs-keyword">this</span>._compile(g, <span class="hljs-keyword">this</span>._path(data[i], opts, interval, heightRatio))
                ._compile(g,<span class="hljs-keyword">this</span>._circle(data[i], opts, interval, heightRatio))
                ._compile(svg,g);
            }
            <span class="hljs-keyword">this</span>._compile(svg, <span class="hljs-keyword">this</span>._label(data, opts, interval, heightRatio, min, max))
            ._compile(<span class="hljs-keyword">this</span>.element,svg, reRender);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>attach events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _attach: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.hover)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

            <span class="hljs-keyword">var</span> div = doc.createElement(<span class="hljs-string">'div'</span>);
            div.className = <span class="hljs-string">'graphHover'</span>;
            div.style.position = <span class="hljs-string">'absolute'</span>;
            div.style.display = <span class="hljs-string">'none'</span>;
            <span class="hljs-keyword">this</span>._compile(<span class="hljs-keyword">this</span>.element, div);
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

            yako.unbind(<span class="hljs-keyword">this</span>,<span class="hljs-string">'#'</span>+<span class="hljs-keyword">this</span>.element.id +<span class="hljs-string">' .graphData'</span>);
            yako.on(<span class="hljs-keyword">this</span>, <span class="hljs-string">'#'</span>+<span class="hljs-keyword">this</span>.element.id +<span class="hljs-string">' .graphData'</span>, <span class="hljs-string">'mouseover'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
                e.target.style.fill = <span class="hljs-string">'blue'</span>;
                <span class="hljs-keyword">var</span> data = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">decodeURIComponent</span>(e.target.dataset.info));</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>TODO:: make the content customizable by the user</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                div.innerHTML = <span class="hljs-string">'&lt;b&gt;Data: '</span> + data.data + <span class="hljs-string">'&lt;/b&gt;&lt;br&gt;&lt;b&gt;Interval: '</span>+data.interval+<span class="hljs-string">'&lt;/b&gt;'</span>;
                div.style.display = <span class="hljs-string">'block'</span>;
                div.style.top = data.cy + <span class="hljs-number">5</span>;
                div.style.left = data.cx + <span class="hljs-number">15</span>;
            });
            yako.on(<span class="hljs-keyword">this</span>, <span class="hljs-string">'#'</span>+<span class="hljs-keyword">this</span>.element.id +<span class="hljs-string">' .graphData'</span>, <span class="hljs-string">'mouseout'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
                e.target.style.fill = <span class="hljs-string">'red'</span>;
                div.style.display = <span class="hljs-string">'none'</span>;
            });
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>extends the api &amp; will not affect the parent name space - a plug &amp; play system</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _spawn : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(graphName)</span> {</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._graphs[graphName])
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._graphs[graphName];
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">var</span> newApi = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>};
            yako._graphs[graphName]._contructor = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                <span class="hljs-keyword">this</span>.root = self;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            };
            yako.extend(newApi.prototype, yako._graphs[graphName]);
            <span class="hljs-keyword">var</span> x = <span class="hljs-keyword">new</span> newApi();
            <span class="hljs-keyword">this</span>._graphs[graphName] = x._contructor();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._graphs[graphName];
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>set default value if they are missing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _prepare: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> defaults = {
                chart: {
                    type: <span class="hljs-string">'line'</span>,
                    width: <span class="hljs-string">'100'</span>,
                    height: <span class="hljs-string">'200'</span>
                },
                xAxis: {},
                yAxis: {},
                data : []
            };
            yako.extend(defaults, <span class="hljs-keyword">this</span>.attributes.opts);
            <span class="hljs-keyword">this</span>.attributes.opts = defaults;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>the graph data &amp; options setter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        set: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
            <span class="hljs-keyword">var</span> opts = opts || {};
            <span class="hljs-keyword">this</span>.attributes.data = opts.data || [];
            <span class="hljs-keyword">this</span>.attributes.opts = opts;
            <span class="hljs-keyword">if</span>(opts.chart &amp;&amp; opts.chart.type &amp;&amp; yako._graphs[opts.chart.type]) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._spawn(opts.chart.type);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>._prepare()
                ._generate();
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>the graph hover options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        hoverable: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
            <span class="hljs-keyword">this</span>.hover = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">this</span>.attributes.hover = opts;
            <span class="hljs-keyword">this</span>._attach();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>remove hover events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        removeHover: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            yako.unbind(<span class="hljs-keyword">this</span>,<span class="hljs-string">'#'</span>+<span class="hljs-keyword">this</span>.element.id+ <span class="hljs-string">' .graphData'</span>, <span class="hljs-string">'mouseout'</span>)
            .unbind(<span class="hljs-keyword">this</span>,<span class="hljs-string">'#'</span>+<span class="hljs-keyword">this</span>.element.id+<span class="hljs-string">' .graphData'</span>, <span class="hljs-string">'mouseover'</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>to support increment data for 3 scenarios</p>
<ul>
<li>adding new set of data</li>
<li>partial update on one set of data</li>
<li>updating all data at once
INPUT: json object or array of object
RETURN: this</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>        incrementData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(json)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>to contain all the dom nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> domArray = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>this is an id element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.element.tagName) {
                <span class="hljs-keyword">var</span> _arr = <span class="hljs-keyword">this</span>.element.getElementsByTagName(<span class="hljs-string">'path'</span>);
                <span class="hljs-built_in">Array</span>.prototype.filter.call(_arr, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
                    <span class="hljs-keyword">if</span>(e.nodeName) {
                        domArray.push(e);
                    }
                });</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>this is a class element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            } <span class="hljs-keyword">else</span> {
                domArray = {};
                <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
                <span class="hljs-built_in">Array</span>.prototype.filter.call(<span class="hljs-keyword">this</span>.element, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
                    <span class="hljs-keyword">if</span> (e.nodeName) {
                        domArray[e.nodeName+i] = [];
                        <span class="hljs-keyword">var</span> _arr =  <span class="hljs-keyword">this</span>.element.getElementsByTagName(<span class="hljs-string">'path'</span>);
                        <span class="hljs-built_in">Array</span>.prototype.filter.call(_arr, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span>
                            <span class="hljs-keyword">if</span> (x.nodeName) {
                                domArray[e.nodeName+i].push(x);
                                i++;
                            }
                        });
                    }
                });
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>now analyze what is needed to be update;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">this</span>._appendZeroAndData(<span class="hljs-keyword">this</span>.attributes.data, json);

            <span class="hljs-keyword">this</span>._generate(<span class="hljs-literal">true</span>)
            ._attach();

        },
        _zeroGenerator: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(len)</span> {</span>
            <span class="hljs-keyword">var</span> arr = [];
            <span class="hljs-keyword">while</span>(len--) arr.push(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">return</span> arr;
        },
        _appendZeroAndData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(oldData, newData)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>cast them into an arra</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> oldData === <span class="hljs-built_in">Object</span>) oldData = [oldData];
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newData === <span class="hljs-built_in">Object</span>) newData = [newData];</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>just to make your we have both data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span>(!oldData || !newData)
                <span class="hljs-keyword">return</span> oldData || newData;

            <span class="hljs-keyword">var</span> oldLen = oldData[<span class="hljs-number">0</span>].length,
                newLen = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>check if the corresponding label exist for the data;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> newData) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j <span class="hljs-keyword">in</span> oldData) {
                    <span class="hljs-keyword">if</span> (oldData[j].label == newData[i].label) {
                        newData[i]._exist = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                }
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>determine the new max length &amp;&amp; check if data exist;
get new len &amp; push non existing data to old data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> newData) {
                <span class="hljs-keyword">if</span> (newData[i] &amp;&amp; newData[i]._exist === <span class="hljs-literal">undefined</span>) {
                    <span class="hljs-keyword">if</span> (newData[i].data.length &gt; oldLen &amp;&amp;
                        (newData[i].data.length - oldLen) &gt; newLen) {
                        newLen = newData[i].data.length;
                        oldData.push(newData.splice(i,<span class="hljs-number">1</span>));
                    }
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newData[i] &amp;&amp; newData[i]._exist === <span class="hljs-literal">true</span>){
                    <span class="hljs-keyword">if</span>(newData[i].data.length &gt; newLen)
                        newLen = newData[i].data.length;
                }
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>append new data into old data &amp; zeroing unmatched array length;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> oldData) {
                <span class="hljs-keyword">var</span> updated = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j <span class="hljs-keyword">in</span> newData) {
                    <span class="hljs-keyword">if</span> (oldData[i].label == newData[j].label) {
                        <span class="hljs-keyword">var</span> zeros = <span class="hljs-keyword">this</span>._zeroGenerator(newLen - newData[j].data.length);
                        oldData[i].data=(oldData[i].data.concat(newData[j].data.concat(zeros)));
                        updated = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                }
                <span class="hljs-keyword">if</span>(!updated) {
                    <span class="hljs-keyword">var</span> zeros = <span class="hljs-keyword">this</span>._zeroGenerator(newLen);
                    oldData[i].data = oldData[i].data.concat(zeros);
                }
            }

            <span class="hljs-keyword">return</span> oldData;
        }
    });
})(window, document);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
