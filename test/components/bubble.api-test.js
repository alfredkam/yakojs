describe('bubble.api', function () {

  var expect = require('expect');
  var bubbleApi = require('../../src/components/bubble.api.es6');

  describe('@describeXAxisForBubbleLine', function () {
    it('should return a horizontal path without NaN', function () {
      var scale =  {
          min: 23,
          max: 492,
          maxSet: [],
          len: 30,
          rows: 1,
          ySecs: 0,
          color: [],
          xAxis: { strokeColor: '#333' },
          bubble: { maxRadius: 10, strokeColor: 'red', strokeWidth: '3' },
          scattered: false,
          fill: true,
          line: true,
          paddingBottom: 0,
          paddingTop: 0,
          paddingRight: 0,
          paddingLeft: 0,
          height: 100,
          width: 300,
          type: 'bubble-point',
          _data:
          [ 483,
           170,
           307,
           491,
           113,
           191,
           138,
           105,
           489,
           262,
           61,
           444,
           23,
           339,
           428,
           267,
           99,
           183,
           160,
           196,
           367,
           281,
           33,
           400,
           416,
           252,
           364,
           340,
           492,
           262]
      };
      var result = bubbleApi.describeXAxisForBubbleLine(500, 300, scale);
      expect(result)
        .toNotContain('NaN');
    });
  });

  describe('@describeBubbleObject', function () {
    it('should return paths without NaN, with data argument as an array of objects', function () {
      var data = [{"data":[20,422,200]},{"data":[187,502,440]},{"data":[389,306,77]},{"data":[69,310,108]},{"data":[192,103,140]}];
      var scale = {"min":[20,103,77],"max":[389,502,440],"maxSet":[],"len":5,"rows":1,"ySecs":0,"color":[null,null,null,null,null],"parentType":"bubble","complex":true,"maxRadius":10,"inverse":[],"scattered":false,"fill":"#000","line":true,"invert":[],"innerPaddingBottom":10,"innerPaddingTop":10,"innerPaddingRight":10,"innerPaddingLeft":10,"innerPadding":0,"paddingBottom":0,"paddingTop":0,"paddingRight":0,"paddingLeft":0,"height":100,"width":300,"type":"bubble-scattered","_data":[{"data":[20,422,200]},{"data":[187,502,440]},{"data":[389,306,77]},{"data":[69,310,108]},{"data":[192,103,140]}],"hasInverse":{},"minRadius":0,"widthRatio":0.7197943444730077,"heightRatio":0.1593625498007968};
      var expected = ["<circle fill=\"#000\" r=\"4.545454545454545\" cy=\"22.749003984063748\" cx=\"275.60411311053986\"></circle>","<circle fill=\"#000\" r=\"10\" cy=\"10\" cx=\"155.39845758354755\"></circle>","<circle fill=\"#000\" r=\"1.75\" cy=\"41.235059760956176\" cx=\"10\"></circle>","<circle fill=\"#000\" r=\"2.4545454545454546\" cy=\"40.59760956175299\" cx=\"240.33419023136247\"></circle>","<circle fill=\"#000\" r=\"3.1818181818181817\" cy=\"73.58565737051794\" cx=\"151.79948586118252\"></circle>"];
      var result = bubbleApi.describeBubbleByObject(data, scale);

      expect(result)
        .toNotContain('NaN');
    });
  });

  describe('@describeBubbleLineByObject (Bubble point / line)', function () {
    it('should return a path without NaN', function () {
      var height = 100;
      var width = 300;
      var data = [{"data":0,"date":"2012-09-28T00:00:00.000Z","meta":{"count":0,"date":"2012-09-28","version":"1.0","rating":null},"fill":""},{"data":0,"date":"2012-10-15T00:00:00.000Z","meta":{"count":0,"date":"2012-10-15","version":"1.0.1","rating":null},"fill":""},{"data":0,"date":"2012-10-27T00:00:00.000Z","meta":{"count":0,"date":"2012-10-27","version":"1.0.2","rating":null},"fill":""},{"data":0,"date":"2012-11-13T00:00:00.000Z","meta":{"count":0,"date":"2012-11-13","version":"1.1","rating":null},"fill":""},{"data":0,"date":"2012-11-21T00:00:00.000Z","meta":{"count":0,"date":"2012-11-21","version":"1.1.1","rating":null},"fill":""},{"data":0,"date":"2013-02-05T00:00:00.000Z","meta":{"count":0,"date":"2013-02-05","version":"1.2","rating":null},"fill":""},{"data":0,"date":"2013-02-19T00:00:00.000Z","meta":{"count":0,"date":"2013-02-19","version":"1.3","rating":null},"fill":""},{"data":0,"date":"2013-03-01T00:00:00.000Z","meta":{"count":0,"date":"2013-03-01","version":"1.3.1","rating":null},"fill":""},{"data":0,"date":"2013-04-11T00:00:00.000Z","meta":{"count":0,"date":"2013-04-11","version":"1.4","rating":null},"fill":""},{"data":0,"date":"2013-04-12T00:00:00.000Z","meta":{"count":0,"date":"2013-04-12","version":"1.4.1","rating":null},"fill":""},{"data":0,"date":"2013-05-09T00:00:00.000Z","meta":{"count":0,"date":"2013-05-09","version":"1.5","rating":null},"fill":""},{"data":0,"date":"2013-06-04T00:00:00.000Z","meta":{"count":0,"date":"2013-06-04","version":"1.6","rating":null},"fill":""},{"data":0,"date":"2013-06-18T00:00:00.000Z","meta":{"count":0,"date":"2013-06-18","version":"1.6.1","rating":null},"fill":""},{"data":0,"date":"2013-07-01T00:00:00.000Z","meta":{"count":0,"date":"2013-07-01","version":"1.7","rating":null},"fill":""},{"data":0,"date":"2013-07-03T00:00:00.000Z","meta":{"count":0,"date":"2013-07-03","version":"1.7.1","rating":null},"fill":""},{"data":0,"date":"2013-07-04T00:00:00.000Z","meta":{"count":0,"date":"2013-07-04","version":"1.7.2","rating":null},"fill":""},{"data":4397,"fill":"#faa21b","date":"2013-07-17T00:00:00.000Z","meta":{"count":4397,"date":"2013-07-17","version":"1.7.3","rating":3.5}},{"data":4591,"fill":"#2960ac","date":"2013-08-24T00:00:00.000Z","meta":{"count":4591,"date":"2013-08-24","version":"1.8","rating":1}},{"data":209,"fill":"#9ccee0","date":"2013-09-12T00:00:00.000Z","meta":{"count":209,"date":"2013-09-12","version":"1.8.1","rating":3}},{"data":43,"fill":"#9ccee0","date":"2013-10-01T00:00:00.000Z","meta":{"count":43,"date":"2013-10-01","version":"1.8.4","rating":2.5}},{"data":31,"fill":"#6fa3cd","date":"2013-10-11T00:00:00.000Z","meta":{"count":31,"date":"2013-10-11","version":"1.8.5","rating":2}},{"data":94,"fill":"#faa21b","date":"2013-11-06T00:00:00.000Z","meta":{"count":94,"date":"2013-11-06","version":"2.0","rating":3.5}},{"data":30,"fill":"#2960ac","date":"2013-11-13T00:00:00.000Z","meta":{"count":30,"date":"2013-11-13","version":"2.0.1","rating":1}},{"data":255,"fill":"#9ccee0","date":"2013-11-16T00:00:00.000Z","meta":{"count":255,"date":"2013-11-16","version":"2.0.2","rating":2.5}},{"data":266,"fill":"#6fa3cd","date":"2013-11-25T00:00:00.000Z","meta":{"count":266,"date":"2013-11-25","version":"2.0.3","rating":2}},{"data":893,"fill":"#6fa3cd","date":"2013-12-13T00:00:00.000Z","meta":{"count":893,"date":"2013-12-13","version":"2.0.6","rating":1.5}},{"data":609,"fill":"#2960ac","date":"2014-02-14T00:00:00.000Z","meta":{"count":609,"date":"2014-02-14","version":"2.1","rating":1}},{"data":9,"fill":"#2960ac","date":"2014-04-17T00:00:00.000Z","meta":{"count":9,"date":"2014-04-17","version":"2.2","rating":0.5}},{"data":8,"fill":"#2960ac","date":"2014-04-24T00:00:00.000Z","meta":{"count":8,"date":"2014-04-24","version":"2.3","rating":1}},{"data":0,"date":"2014-04-28T00:00:00.000Z","meta":{"count":0,"date":"2014-04-28","version":"2.3.1","rating":null},"fill":""},{"data":123,"fill":"#6fa3cd","date":"2014-05-08T00:00:00.000Z","meta":{"count":123,"date":"2014-05-08","version":"2.3.2","rating":2}},{"data":116,"fill":"#faa21b","date":"2014-06-05T00:00:00.000Z","meta":{"count":116,"date":"2014-06-05","version":"2.4","rating":3.5}},{"data":57,"fill":"#6fa3cd","date":"2014-06-12T00:00:00.000Z","meta":{"count":57,"date":"2014-06-12","version":"2.4.1","rating":1.5}},{"data":123,"date":"2014-06-25T00:00:00.000Z","meta":{"count":123,"date":"2014-06-25","version":"2.4.2","rating":null},"fill":""},{"data":75,"fill":"#6fa3cd","date":"2014-06-26T00:00:00.000Z","meta":{"count":75,"date":"2014-06-26","version":"2.4.3","rating":2}},{"data":430,"fill":"#6fa3cd","date":"2014-07-09T00:00:00.000Z","meta":{"count":430,"date":"2014-07-09","version":"2.5.1","rating":2}},{"data":333,"fill":"#9ccee0","date":"2014-09-16T00:00:00.000Z","meta":{"count":333,"date":"2014-09-16","version":"3.0","rating":2.5}},{"data":224,"fill":"#6fa3cd","date":"2014-10-11T00:00:00.000Z","meta":{"count":224,"date":"2014-10-11","version":"3.0.2","rating":2}},{"data":38,"fill":"#2960ac","date":"2014-11-14T00:00:00.000Z","meta":{"count":38,"date":"2014-11-14","version":"3.1","rating":1}},{"data":196,"fill":"#6fa3cd","date":"2014-11-20T00:00:00.000Z","meta":{"count":196,"date":"2014-11-20","version":"3.1.1","rating":2}},{"data":303,"fill":"#6fa3cd","date":"2014-12-06T00:00:00.000Z","meta":{"count":303,"date":"2014-12-06","version":"3.1.2","rating":1.5}},{"data":1721,"fill":"#2960ac","date":"2014-12-30T00:00:00.000Z","meta":{"count":1721,"date":"2014-12-30","version":"3.2","rating":0.5}},{"data":563,"fill":"#faa21b","date":"2015-02-09T00:00:00.000Z","meta":{"count":563,"date":"2015-02-09","version":"3.3","rating":3.5}},{"data":345,"fill":"#6fa3cd","date":"2015-02-22T00:00:00.000Z","meta":{"count":345,"date":"2015-02-22","version":"3.3.2","rating":2}},{"data":337,"fill":"#9ccee0","date":"2015-03-26T00:00:00.000Z","meta":{"count":337,"date":"2015-03-26","version":"3.4","rating":3}},{"data":479,"fill":"#9ccee0","date":"2015-04-19T00:00:00.000Z","meta":{"count":479,"date":"2015-04-19","version":"3.4.2","rating":3}}];
      var scale = {"min":0,"max":4591,"maxSet":[],"len":46,"rows":1,"ySecs":0,"color":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"parentType":"bubble","complex":true,"axis":{"strokeColor":"#000","strokeWidth":2},"minRadius":5,"maxRadius":15,"strokeColor":"#000","strokeWidth":2,"scattered":false,"fill":"#333","line":true,"invert":[],"innerPaddingBottom":0,"innerPaddingTop":0,"innerPaddingRight":0,"innerPaddingLeft":0,"innerPadding":0,"paddingBottom":0,"paddingTop":0,"paddingRight":6.043345676323241,"paddingLeft":0,"height":100,"width":300,"type":"bubble-point","_data":[{"data":0,"date":"2012-09-28T00:00:00.000Z","meta":{"count":0,"date":"2012-09-28","version":"1.0","rating":null},"fill":""},{"data":0,"date":"2012-10-15T00:00:00.000Z","meta":{"count":0,"date":"2012-10-15","version":"1.0.1","rating":null},"fill":""},{"data":0,"date":"2012-10-27T00:00:00.000Z","meta":{"count":0,"date":"2012-10-27","version":"1.0.2","rating":null},"fill":""},{"data":0,"date":"2012-11-13T00:00:00.000Z","meta":{"count":0,"date":"2012-11-13","version":"1.1","rating":null},"fill":""},{"data":0,"date":"2012-11-21T00:00:00.000Z","meta":{"count":0,"date":"2012-11-21","version":"1.1.1","rating":null},"fill":""},{"data":0,"date":"2013-02-05T00:00:00.000Z","meta":{"count":0,"date":"2013-02-05","version":"1.2","rating":null},"fill":""},{"data":0,"date":"2013-02-19T00:00:00.000Z","meta":{"count":0,"date":"2013-02-19","version":"1.3","rating":null},"fill":""},{"data":0,"date":"2013-03-01T00:00:00.000Z","meta":{"count":0,"date":"2013-03-01","version":"1.3.1","rating":null},"fill":""},{"data":0,"date":"2013-04-11T00:00:00.000Z","meta":{"count":0,"date":"2013-04-11","version":"1.4","rating":null},"fill":""},{"data":0,"date":"2013-04-12T00:00:00.000Z","meta":{"count":0,"date":"2013-04-12","version":"1.4.1","rating":null},"fill":""},{"data":0,"date":"2013-05-09T00:00:00.000Z","meta":{"count":0,"date":"2013-05-09","version":"1.5","rating":null},"fill":""},{"data":0,"date":"2013-06-04T00:00:00.000Z","meta":{"count":0,"date":"2013-06-04","version":"1.6","rating":null},"fill":""},{"data":0,"date":"2013-06-18T00:00:00.000Z","meta":{"count":0,"date":"2013-06-18","version":"1.6.1","rating":null},"fill":""},{"data":0,"date":"2013-07-01T00:00:00.000Z","meta":{"count":0,"date":"2013-07-01","version":"1.7","rating":null},"fill":""},{"data":0,"date":"2013-07-03T00:00:00.000Z","meta":{"count":0,"date":"2013-07-03","version":"1.7.1","rating":null},"fill":""},{"data":0,"date":"2013-07-04T00:00:00.000Z","meta":{"count":0,"date":"2013-07-04","version":"1.7.2","rating":null},"fill":""},{"data":4397,"fill":"#faa21b","date":"2013-07-17T00:00:00.000Z","meta":{"count":4397,"date":"2013-07-17","version":"1.7.3","rating":3.5}},{"data":4591,"fill":"#2960ac","date":"2013-08-24T00:00:00.000Z","meta":{"count":4591,"date":"2013-08-24","version":"1.8","rating":1}},{"data":209,"fill":"#9ccee0","date":"2013-09-12T00:00:00.000Z","meta":{"count":209,"date":"2013-09-12","version":"1.8.1","rating":3}},{"data":43,"fill":"#9ccee0","date":"2013-10-01T00:00:00.000Z","meta":{"count":43,"date":"2013-10-01","version":"1.8.4","rating":2.5}},{"data":31,"fill":"#6fa3cd","date":"2013-10-11T00:00:00.000Z","meta":{"count":31,"date":"2013-10-11","version":"1.8.5","rating":2}},{"data":94,"fill":"#faa21b","date":"2013-11-06T00:00:00.000Z","meta":{"count":94,"date":"2013-11-06","version":"2.0","rating":3.5}},{"data":30,"fill":"#2960ac","date":"2013-11-13T00:00:00.000Z","meta":{"count":30,"date":"2013-11-13","version":"2.0.1","rating":1}},{"data":255,"fill":"#9ccee0","date":"2013-11-16T00:00:00.000Z","meta":{"count":255,"date":"2013-11-16","version":"2.0.2","rating":2.5}},{"data":266,"fill":"#6fa3cd","date":"2013-11-25T00:00:00.000Z","meta":{"count":266,"date":"2013-11-25","version":"2.0.3","rating":2}},{"data":893,"fill":"#6fa3cd","date":"2013-12-13T00:00:00.000Z","meta":{"count":893,"date":"2013-12-13","version":"2.0.6","rating":1.5}},{"data":609,"fill":"#2960ac","date":"2014-02-14T00:00:00.000Z","meta":{"count":609,"date":"2014-02-14","version":"2.1","rating":1}},{"data":9,"fill":"#2960ac","date":"2014-04-17T00:00:00.000Z","meta":{"count":9,"date":"2014-04-17","version":"2.2","rating":0.5}},{"data":8,"fill":"#2960ac","date":"2014-04-24T00:00:00.000Z","meta":{"count":8,"date":"2014-04-24","version":"2.3","rating":1}},{"data":0,"date":"2014-04-28T00:00:00.000Z","meta":{"count":0,"date":"2014-04-28","version":"2.3.1","rating":null},"fill":""},{"data":123,"fill":"#6fa3cd","date":"2014-05-08T00:00:00.000Z","meta":{"count":123,"date":"2014-05-08","version":"2.3.2","rating":2}},{"data":116,"fill":"#faa21b","date":"2014-06-05T00:00:00.000Z","meta":{"count":116,"date":"2014-06-05","version":"2.4","rating":3.5}},{"data":57,"fill":"#6fa3cd","date":"2014-06-12T00:00:00.000Z","meta":{"count":57,"date":"2014-06-12","version":"2.4.1","rating":1.5}},{"data":123,"date":"2014-06-25T00:00:00.000Z","meta":{"count":123,"date":"2014-06-25","version":"2.4.2","rating":null},"fill":""},{"data":75,"fill":"#6fa3cd","date":"2014-06-26T00:00:00.000Z","meta":{"count":75,"date":"2014-06-26","version":"2.4.3","rating":2}},{"data":430,"fill":"#6fa3cd","date":"2014-07-09T00:00:00.000Z","meta":{"count":430,"date":"2014-07-09","version":"2.5.1","rating":2}},{"data":333,"fill":"#9ccee0","date":"2014-09-16T00:00:00.000Z","meta":{"count":333,"date":"2014-09-16","version":"3.0","rating":2.5}},{"data":224,"fill":"#6fa3cd","date":"2014-10-11T00:00:00.000Z","meta":{"count":224,"date":"2014-10-11","version":"3.0.2","rating":2}},{"data":38,"fill":"#2960ac","date":"2014-11-14T00:00:00.000Z","meta":{"count":38,"date":"2014-11-14","version":"3.1","rating":1}},{"data":196,"fill":"#6fa3cd","date":"2014-11-20T00:00:00.000Z","meta":{"count":196,"date":"2014-11-20","version":"3.1.1","rating":2}},{"data":303,"fill":"#6fa3cd","date":"2014-12-06T00:00:00.000Z","meta":{"count":303,"date":"2014-12-06","version":"3.1.2","rating":1.5}},{"data":1721,"fill":"#2960ac","date":"2014-12-30T00:00:00.000Z","meta":{"count":1721,"date":"2014-12-30","version":"3.2","rating":0.5}},{"data":563,"fill":"#faa21b","date":"2015-02-09T00:00:00.000Z","meta":{"count":563,"date":"2015-02-09","version":"3.3","rating":3.5}},{"data":345,"fill":"#6fa3cd","date":"2015-02-22T00:00:00.000Z","meta":{"count":345,"date":"2015-02-22","version":"3.3.2","rating":2}},{"data":337,"fill":"#9ccee0","date":"2015-03-26T00:00:00.000Z","meta":{"count":337,"date":"2015-03-26","version":"3.4","rating":3}},{"data":479,"fill":"#9ccee0","date":"2015-04-19T00:00:00.000Z","meta":{"count":479,"date":"2015-04-19","version":"3.4.2","rating":3}}],"hasInverse":{},"startTick":1348790400000,"endTick":1429401600000,"tickSize":3.646598169034535e-9};
      var expected = ["<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"0\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"5.356123390677925\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"9.136916372332932\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"14.493039763010856\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"17.013568417447527\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"40.9585906345959\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"45.36951577986007\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"48.52017659790591\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"61.43788595189385\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"61.752952033698435\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"70.25973624242219\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"78.45145436934138\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"82.86237951460555\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"86.95823857806514\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"87.58837074167431\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"87.90343682347888\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#faa21b\" r=\"14.57743411021564\" cy=\"50\" cx=\"91.99929588693848\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#2960ac\" r=\"15\" cy=\"50\" cx=\"103.97180699551267\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#9ccee0\" r=\"5.455238510128512\" cy=\"50\" cx=\"109.95806254979976\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#9ccee0\" r=\"5.093661511653234\" cy=\"50\" cx=\"115.94431810408685\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.067523415377913\" cy=\"50\" cx=\"119.0949789221327\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#faa21b\" r=\"5.20474842082335\" cy=\"50\" cx=\"127.28669704905187\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#2960ac\" r=\"5.065345240688303\" cy=\"50\" cx=\"129.49215962168395\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#9ccee0\" r=\"5.555434545850577\" cy=\"50\" cx=\"130.43735786709772\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.5793944674362885\" cy=\"50\" cx=\"133.27295260333895\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"6.945109997821826\" cy=\"50\" cx=\"138.94414207582147\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#2960ac\" r=\"6.326508385972555\" cy=\"50\" cx=\"158.79330522951025\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#2960ac\" r=\"5.019603572206491\" cy=\"50\" cx=\"178.32740230139444\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#2960ac\" r=\"5.017425397516881\" cy=\"50\" cx=\"180.53286487402653\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"0\" cy=\"50\" cx=\"181.79312920124488\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.2679154868220435\" cy=\"50\" cx=\"184.9437900192907\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#faa21b\" r=\"5.252668263994773\" cy=\"50\" cx=\"193.76564030981905\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.124155957307776\" cy=\"50\" cx=\"195.97110288245113\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#333\" r=\"5.2679154868220435\" cy=\"50\" cx=\"200.06696194591075\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.163363101720758\" cy=\"50\" cx=\"200.38202802771534\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.936615116532346\" cy=\"50\" cx=\"204.47788709117492\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#9ccee0\" r=\"5.725332171640165\" cy=\"50\" cx=\"226.2174467356912\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.487911130472664\" cy=\"50\" cx=\"234.09409878080578\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#2960ac\" r=\"5.082770638205184\" cy=\"50\" cx=\"244.80634556216165\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.426922239163581\" cy=\"50\" cx=\"246.69674205298915\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.659986930951862\" cy=\"50\" cx=\"251.7377993618625\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#2960ac\" r=\"8.748638640818994\" cy=\"50\" cx=\"259.2993853251725\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#faa21b\" r=\"6.22631235025049\" cy=\"50\" cx=\"272.2170946791604\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#6fa3cd\" r=\"5.7514702679154865\" cy=\"50\" cx=\"276.31295374262004\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#9ccee0\" r=\"5.7340448703986056\" cy=\"50\" cx=\"286.39506836036674\"></circle>","<circle stroke-width=\"0\" stroke=\"transparent\" fill=\"#9ccee0\" r=\"6.043345676323241\" cy=\"50\" cx=\"293.95665432367673\"></circle>"];

      for (var i in data) {
        data[i].date = new Date(data[i].date);
      }

      var result = bubbleApi.describeBubbleLineByObject(data, height, width, scale);

      expect(result)
        .toNotContain('NaN');
    });
  });

  describe('@getRatioByObject', function () {
    it('should return a new set of ratios for bubble scatter', function () {
      var scale = {"min":[91,280,151],"max":[436,431,347],"maxSet":[],"len":5,"rows":1,"ySecs":0,"color":[null,null,null,null,null],"parentType":"bubble","complex":true,"maxRadius":10,"inverse":[],"scattered":false,"fill":"#000","line":true,"invert":[],"innerPaddingBottom":0,"innerPaddingTop":0,"innerPaddingRight":0,"innerPaddingLeft":0,"innerPadding":0,"paddingBottom":0,"paddingTop":0,"paddingRight":0,"paddingLeft":0,"height":100,"width":300,"type":"bubble-scattered","_data":[{"data":[427,280,210]},{"data":[436,431,301]},{"data":[421,313,267]},{"data":[116,324,347]},{"data":[91,418,151]}],"hasInverse":{}};
      var expected = {"min":[91,280,151],"max":[436,431,347],"maxSet":[],"len":5,"rows":1,"ySecs":0,"color":[null,null,null,null,null],"parentType":"bubble","complex":true,"maxRadius":10,"inverse":[],"scattered":false,"fill":"#000","line":true,"invert":[],"innerPaddingBottom":10,"innerPaddingTop":10,"innerPaddingRight":10,"innerPaddingLeft":10,"innerPadding":0,"paddingBottom":0,"paddingTop":0,"paddingRight":0,"paddingLeft":0,"height":100,"width":300,"type":"bubble-scattered","_data":[{"data":[427,280,210]},{"data":[436,431,301]},{"data":[421,313,267]},{"data":[116,324,347]},{"data":[91,418,151]}],"hasInverse":{},"minRadius":0,"widthRatio":0.6422018348623854,"heightRatio":0.18561484918793503};

      bubbleApi.getRatioByObject(scale);
      expect(scale)
        .toEqual(expected);
    });
  });

  describe('@getRatioByTimeSeries', function () {
    it('should return a new set of ratios for bubble point / line', function () {
      var scale = {"min":0,"max":4591,"maxSet":[],"len":46,"rows":1,"ySecs":0,"color":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"parentType":"bubble","complex":true,"axis":{"strokeColor":"#000","strokeWidth":2},"minRadius":5,"maxRadius":15,"strokeColor":"#000","strokeWidth":2,"scattered":false,"fill":"#333","line":true,"invert":[],"innerPaddingBottom":0,"innerPaddingTop":0,"innerPaddingRight":0,"innerPaddingLeft":0,"innerPadding":0,"paddingBottom":0,"paddingTop":0,"paddingRight":0,"paddingLeft":0,"height":100,"width":300,"type":"bubble-point","_data":[{"data":0,"date":"2012-09-28T00:00:00.000Z","meta":{"count":0,"date":"2012-09-28","version":"1.0","rating":null},"fill":""},{"data":0,"date":"2012-10-15T00:00:00.000Z","meta":{"count":0,"date":"2012-10-15","version":"1.0.1","rating":null},"fill":""},{"data":0,"date":"2012-10-27T00:00:00.000Z","meta":{"count":0,"date":"2012-10-27","version":"1.0.2","rating":null},"fill":""},{"data":0,"date":"2012-11-13T00:00:00.000Z","meta":{"count":0,"date":"2012-11-13","version":"1.1","rating":null},"fill":""},{"data":0,"date":"2012-11-21T00:00:00.000Z","meta":{"count":0,"date":"2012-11-21","version":"1.1.1","rating":null},"fill":""},{"data":0,"date":"2013-02-05T00:00:00.000Z","meta":{"count":0,"date":"2013-02-05","version":"1.2","rating":null},"fill":""},{"data":0,"date":"2013-02-19T00:00:00.000Z","meta":{"count":0,"date":"2013-02-19","version":"1.3","rating":null},"fill":""},{"data":0,"date":"2013-03-01T00:00:00.000Z","meta":{"count":0,"date":"2013-03-01","version":"1.3.1","rating":null},"fill":""},{"data":0,"date":"2013-04-11T00:00:00.000Z","meta":{"count":0,"date":"2013-04-11","version":"1.4","rating":null},"fill":""},{"data":0,"date":"2013-04-12T00:00:00.000Z","meta":{"count":0,"date":"2013-04-12","version":"1.4.1","rating":null},"fill":""},{"data":0,"date":"2013-05-09T00:00:00.000Z","meta":{"count":0,"date":"2013-05-09","version":"1.5","rating":null},"fill":""},{"data":0,"date":"2013-06-04T00:00:00.000Z","meta":{"count":0,"date":"2013-06-04","version":"1.6","rating":null},"fill":""},{"data":0,"date":"2013-06-18T00:00:00.000Z","meta":{"count":0,"date":"2013-06-18","version":"1.6.1","rating":null},"fill":""},{"data":0,"date":"2013-07-01T00:00:00.000Z","meta":{"count":0,"date":"2013-07-01","version":"1.7","rating":null},"fill":""},{"data":0,"date":"2013-07-03T00:00:00.000Z","meta":{"count":0,"date":"2013-07-03","version":"1.7.1","rating":null},"fill":""},{"data":0,"date":"2013-07-04T00:00:00.000Z","meta":{"count":0,"date":"2013-07-04","version":"1.7.2","rating":null},"fill":""},{"data":4397,"fill":"#faa21b","date":"2013-07-17T00:00:00.000Z","meta":{"count":4397,"date":"2013-07-17","version":"1.7.3","rating":3.5}},{"data":4591,"fill":"#2960ac","date":"2013-08-24T00:00:00.000Z","meta":{"count":4591,"date":"2013-08-24","version":"1.8","rating":1}},{"data":209,"fill":"#9ccee0","date":"2013-09-12T00:00:00.000Z","meta":{"count":209,"date":"2013-09-12","version":"1.8.1","rating":3}},{"data":43,"fill":"#9ccee0","date":"2013-10-01T00:00:00.000Z","meta":{"count":43,"date":"2013-10-01","version":"1.8.4","rating":2.5}},{"data":31,"fill":"#6fa3cd","date":"2013-10-11T00:00:00.000Z","meta":{"count":31,"date":"2013-10-11","version":"1.8.5","rating":2}},{"data":94,"fill":"#faa21b","date":"2013-11-06T00:00:00.000Z","meta":{"count":94,"date":"2013-11-06","version":"2.0","rating":3.5}},{"data":30,"fill":"#2960ac","date":"2013-11-13T00:00:00.000Z","meta":{"count":30,"date":"2013-11-13","version":"2.0.1","rating":1}},{"data":255,"fill":"#9ccee0","date":"2013-11-16T00:00:00.000Z","meta":{"count":255,"date":"2013-11-16","version":"2.0.2","rating":2.5}},{"data":266,"fill":"#6fa3cd","date":"2013-11-25T00:00:00.000Z","meta":{"count":266,"date":"2013-11-25","version":"2.0.3","rating":2}},{"data":893,"fill":"#6fa3cd","date":"2013-12-13T00:00:00.000Z","meta":{"count":893,"date":"2013-12-13","version":"2.0.6","rating":1.5}},{"data":609,"fill":"#2960ac","date":"2014-02-14T00:00:00.000Z","meta":{"count":609,"date":"2014-02-14","version":"2.1","rating":1}},{"data":9,"fill":"#2960ac","date":"2014-04-17T00:00:00.000Z","meta":{"count":9,"date":"2014-04-17","version":"2.2","rating":0.5}},{"data":8,"fill":"#2960ac","date":"2014-04-24T00:00:00.000Z","meta":{"count":8,"date":"2014-04-24","version":"2.3","rating":1}},{"data":0,"date":"2014-04-28T00:00:00.000Z","meta":{"count":0,"date":"2014-04-28","version":"2.3.1","rating":null},"fill":""},{"data":123,"fill":"#6fa3cd","date":"2014-05-08T00:00:00.000Z","meta":{"count":123,"date":"2014-05-08","version":"2.3.2","rating":2}},{"data":116,"fill":"#faa21b","date":"2014-06-05T00:00:00.000Z","meta":{"count":116,"date":"2014-06-05","version":"2.4","rating":3.5}},{"data":57,"fill":"#6fa3cd","date":"2014-06-12T00:00:00.000Z","meta":{"count":57,"date":"2014-06-12","version":"2.4.1","rating":1.5}},{"data":123,"date":"2014-06-25T00:00:00.000Z","meta":{"count":123,"date":"2014-06-25","version":"2.4.2","rating":null},"fill":""},{"data":75,"fill":"#6fa3cd","date":"2014-06-26T00:00:00.000Z","meta":{"count":75,"date":"2014-06-26","version":"2.4.3","rating":2}},{"data":430,"fill":"#6fa3cd","date":"2014-07-09T00:00:00.000Z","meta":{"count":430,"date":"2014-07-09","version":"2.5.1","rating":2}},{"data":333,"fill":"#9ccee0","date":"2014-09-16T00:00:00.000Z","meta":{"count":333,"date":"2014-09-16","version":"3.0","rating":2.5}},{"data":224,"fill":"#6fa3cd","date":"2014-10-11T00:00:00.000Z","meta":{"count":224,"date":"2014-10-11","version":"3.0.2","rating":2}},{"data":38,"fill":"#2960ac","date":"2014-11-14T00:00:00.000Z","meta":{"count":38,"date":"2014-11-14","version":"3.1","rating":1}},{"data":196,"fill":"#6fa3cd","date":"2014-11-20T00:00:00.000Z","meta":{"count":196,"date":"2014-11-20","version":"3.1.1","rating":2}},{"data":303,"fill":"#6fa3cd","date":"2014-12-06T00:00:00.000Z","meta":{"count":303,"date":"2014-12-06","version":"3.1.2","rating":1.5}},{"data":1721,"fill":"#2960ac","date":"2014-12-30T00:00:00.000Z","meta":{"count":1721,"date":"2014-12-30","version":"3.2","rating":0.5}},{"data":563,"fill":"#faa21b","date":"2015-02-09T00:00:00.000Z","meta":{"count":563,"date":"2015-02-09","version":"3.3","rating":3.5}},{"data":345,"fill":"#6fa3cd","date":"2015-02-22T00:00:00.000Z","meta":{"count":345,"date":"2015-02-22","version":"3.3.2","rating":2}},{"data":337,"fill":"#9ccee0","date":"2015-03-26T00:00:00.000Z","meta":{"count":337,"date":"2015-03-26","version":"3.4","rating":3}},{"data":479,"fill":"#9ccee0","date":"2015-04-19T00:00:00.000Z","meta":{"count":479,"date":"2015-04-19","version":"3.4.2","rating":3}}],"hasInverse":{}}
      var expected = {"min":0,"max":4591,"maxSet":[],"len":46,"rows":1,"ySecs":0,"color":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"parentType":"bubble","complex":true,"axis":{"strokeColor":"#000","strokeWidth":2},"minRadius":5,"maxRadius":15,"strokeColor":"#000","strokeWidth":2,"scattered":false,"fill":"#333","line":true,"invert":[],"innerPaddingBottom":0,"innerPaddingTop":0,"innerPaddingRight":0,"innerPaddingLeft":0,"innerPadding":0,"paddingBottom":0,"paddingTop":0,"paddingRight":6.043345676323241,"paddingLeft":0,"height":100,"width":300,"type":"bubble-point","_data":[{"data":0,"date":"2012-09-28T00:00:00.000Z","meta":{"count":0,"date":"2012-09-28","version":"1.0","rating":null},"fill":""},{"data":0,"date":"2012-10-15T00:00:00.000Z","meta":{"count":0,"date":"2012-10-15","version":"1.0.1","rating":null},"fill":""},{"data":0,"date":"2012-10-27T00:00:00.000Z","meta":{"count":0,"date":"2012-10-27","version":"1.0.2","rating":null},"fill":""},{"data":0,"date":"2012-11-13T00:00:00.000Z","meta":{"count":0,"date":"2012-11-13","version":"1.1","rating":null},"fill":""},{"data":0,"date":"2012-11-21T00:00:00.000Z","meta":{"count":0,"date":"2012-11-21","version":"1.1.1","rating":null},"fill":""},{"data":0,"date":"2013-02-05T00:00:00.000Z","meta":{"count":0,"date":"2013-02-05","version":"1.2","rating":null},"fill":""},{"data":0,"date":"2013-02-19T00:00:00.000Z","meta":{"count":0,"date":"2013-02-19","version":"1.3","rating":null},"fill":""},{"data":0,"date":"2013-03-01T00:00:00.000Z","meta":{"count":0,"date":"2013-03-01","version":"1.3.1","rating":null},"fill":""},{"data":0,"date":"2013-04-11T00:00:00.000Z","meta":{"count":0,"date":"2013-04-11","version":"1.4","rating":null},"fill":""},{"data":0,"date":"2013-04-12T00:00:00.000Z","meta":{"count":0,"date":"2013-04-12","version":"1.4.1","rating":null},"fill":""},{"data":0,"date":"2013-05-09T00:00:00.000Z","meta":{"count":0,"date":"2013-05-09","version":"1.5","rating":null},"fill":""},{"data":0,"date":"2013-06-04T00:00:00.000Z","meta":{"count":0,"date":"2013-06-04","version":"1.6","rating":null},"fill":""},{"data":0,"date":"2013-06-18T00:00:00.000Z","meta":{"count":0,"date":"2013-06-18","version":"1.6.1","rating":null},"fill":""},{"data":0,"date":"2013-07-01T00:00:00.000Z","meta":{"count":0,"date":"2013-07-01","version":"1.7","rating":null},"fill":""},{"data":0,"date":"2013-07-03T00:00:00.000Z","meta":{"count":0,"date":"2013-07-03","version":"1.7.1","rating":null},"fill":""},{"data":0,"date":"2013-07-04T00:00:00.000Z","meta":{"count":0,"date":"2013-07-04","version":"1.7.2","rating":null},"fill":""},{"data":4397,"fill":"#faa21b","date":"2013-07-17T00:00:00.000Z","meta":{"count":4397,"date":"2013-07-17","version":"1.7.3","rating":3.5}},{"data":4591,"fill":"#2960ac","date":"2013-08-24T00:00:00.000Z","meta":{"count":4591,"date":"2013-08-24","version":"1.8","rating":1}},{"data":209,"fill":"#9ccee0","date":"2013-09-12T00:00:00.000Z","meta":{"count":209,"date":"2013-09-12","version":"1.8.1","rating":3}},{"data":43,"fill":"#9ccee0","date":"2013-10-01T00:00:00.000Z","meta":{"count":43,"date":"2013-10-01","version":"1.8.4","rating":2.5}},{"data":31,"fill":"#6fa3cd","date":"2013-10-11T00:00:00.000Z","meta":{"count":31,"date":"2013-10-11","version":"1.8.5","rating":2}},{"data":94,"fill":"#faa21b","date":"2013-11-06T00:00:00.000Z","meta":{"count":94,"date":"2013-11-06","version":"2.0","rating":3.5}},{"data":30,"fill":"#2960ac","date":"2013-11-13T00:00:00.000Z","meta":{"count":30,"date":"2013-11-13","version":"2.0.1","rating":1}},{"data":255,"fill":"#9ccee0","date":"2013-11-16T00:00:00.000Z","meta":{"count":255,"date":"2013-11-16","version":"2.0.2","rating":2.5}},{"data":266,"fill":"#6fa3cd","date":"2013-11-25T00:00:00.000Z","meta":{"count":266,"date":"2013-11-25","version":"2.0.3","rating":2}},{"data":893,"fill":"#6fa3cd","date":"2013-12-13T00:00:00.000Z","meta":{"count":893,"date":"2013-12-13","version":"2.0.6","rating":1.5}},{"data":609,"fill":"#2960ac","date":"2014-02-14T00:00:00.000Z","meta":{"count":609,"date":"2014-02-14","version":"2.1","rating":1}},{"data":9,"fill":"#2960ac","date":"2014-04-17T00:00:00.000Z","meta":{"count":9,"date":"2014-04-17","version":"2.2","rating":0.5}},{"data":8,"fill":"#2960ac","date":"2014-04-24T00:00:00.000Z","meta":{"count":8,"date":"2014-04-24","version":"2.3","rating":1}},{"data":0,"date":"2014-04-28T00:00:00.000Z","meta":{"count":0,"date":"2014-04-28","version":"2.3.1","rating":null},"fill":""},{"data":123,"fill":"#6fa3cd","date":"2014-05-08T00:00:00.000Z","meta":{"count":123,"date":"2014-05-08","version":"2.3.2","rating":2}},{"data":116,"fill":"#faa21b","date":"2014-06-05T00:00:00.000Z","meta":{"count":116,"date":"2014-06-05","version":"2.4","rating":3.5}},{"data":57,"fill":"#6fa3cd","date":"2014-06-12T00:00:00.000Z","meta":{"count":57,"date":"2014-06-12","version":"2.4.1","rating":1.5}},{"data":123,"date":"2014-06-25T00:00:00.000Z","meta":{"count":123,"date":"2014-06-25","version":"2.4.2","rating":null},"fill":""},{"data":75,"fill":"#6fa3cd","date":"2014-06-26T00:00:00.000Z","meta":{"count":75,"date":"2014-06-26","version":"2.4.3","rating":2}},{"data":430,"fill":"#6fa3cd","date":"2014-07-09T00:00:00.000Z","meta":{"count":430,"date":"2014-07-09","version":"2.5.1","rating":2}},{"data":333,"fill":"#9ccee0","date":"2014-09-16T00:00:00.000Z","meta":{"count":333,"date":"2014-09-16","version":"3.0","rating":2.5}},{"data":224,"fill":"#6fa3cd","date":"2014-10-11T00:00:00.000Z","meta":{"count":224,"date":"2014-10-11","version":"3.0.2","rating":2}},{"data":38,"fill":"#2960ac","date":"2014-11-14T00:00:00.000Z","meta":{"count":38,"date":"2014-11-14","version":"3.1","rating":1}},{"data":196,"fill":"#6fa3cd","date":"2014-11-20T00:00:00.000Z","meta":{"count":196,"date":"2014-11-20","version":"3.1.1","rating":2}},{"data":303,"fill":"#6fa3cd","date":"2014-12-06T00:00:00.000Z","meta":{"count":303,"date":"2014-12-06","version":"3.1.2","rating":1.5}},{"data":1721,"fill":"#2960ac","date":"2014-12-30T00:00:00.000Z","meta":{"count":1721,"date":"2014-12-30","version":"3.2","rating":0.5}},{"data":563,"fill":"#faa21b","date":"2015-02-09T00:00:00.000Z","meta":{"count":563,"date":"2015-02-09","version":"3.3","rating":3.5}},{"data":345,"fill":"#6fa3cd","date":"2015-02-22T00:00:00.000Z","meta":{"count":345,"date":"2015-02-22","version":"3.3.2","rating":2}},{"data":337,"fill":"#9ccee0","date":"2015-03-26T00:00:00.000Z","meta":{"count":337,"date":"2015-03-26","version":"3.4","rating":3}},{"data":479,"fill":"#9ccee0","date":"2015-04-19T00:00:00.000Z","meta":{"count":479,"date":"2015-04-19","version":"3.4.2","rating":3}}],"hasInverse":{},"startTick":1348790400000,"endTick":1429401600000,"tickSize":3.646598169034535e-9}

      for (var i in scale._data) {
        expected._data[i].date = scale._data[i].date = new Date(scale._data[i].date);
      }


      bubbleApi.getRatioByTimeSeries(scale);
      expect(scale)
        .toEqual(expected);
    });
  });
});
