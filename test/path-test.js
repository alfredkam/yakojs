var chai = require('chai');
var expect = chai.expect;
var path = require('../lib/svg/path');

describe('path', function () {
    var attr = {};
    before(function () {
        attr = {
            data: [ 211, 254, 255, 18, 210, 31, 13, 320, 328, 312, 494, 128, 83, 230, 114, 173, 90, 328, 22, 174, 88, 305, 390, 181, 481, 497, 300, 395, 88, 509 ],
            height: 100,
            width: 300
        };
    });
    it('scale', function () {
        var scale = path.getScale(attr);
        var result =  { max: 600,
                          splits: 3,
                          len: 30,
                          min: 13,
                          interval: 10.344828,
                          heightRatio: 0.15,
                          height: 100,
                          width: 300 };
        expect(scale).to.deep.equal(result);
    });

    it('open path', function () {
        var expectD = "M 0 63.349999999999994 L 10.344828 56.9 L 20.689656 56.75 L 31.034484 92.3 L 41.379312 63.5 L 51.72414 90.35 L 62.068968 93.05 L 72.41379599999999 47 L 82.758624 45.800000000000004 L 93.103452 48.2 L 103.44828 20.900000000000006 L 113.79310799999999 75.8 L 124.137936 82.55 L 134.482764 60.5 L 144.82759199999998 77.9 L 155.17242 69.05 L 165.517248 81.5 L 175.862076 45.800000000000004 L 186.206904 91.7 L 196.551732 68.9 L 206.89656 81.8 L 217.241388 49.25 L 227.58621599999998 36.5 L 237.93104399999999 67.85 L 248.275872 22.85000000000001 L 258.6207 20.450000000000003 L 268.965528 50 L 279.310356 35.75 L 289.65518399999996 81.8 L 300.00001199999997 18.650000000000006";
        var scale = path.getScale(attr);
        expect(expectD).to.equal(path.getOpenPath(scale, attr.data));
    });

    it('closed path', function () {
        var expectD = "M 0 63.349999999999994 L 10.344828 56.9 L 20.689656 56.75 L 31.034484 92.3 L 41.379312 63.5 L 51.72414 90.35 L 62.068968 93.05 L 72.41379599999999 47 L 82.758624 45.800000000000004 L 93.103452 48.2 L 103.44828 20.900000000000006 L 113.79310799999999 75.8 L 124.137936 82.55 L 134.482764 60.5 L 144.82759199999998 77.9 L 155.17242 69.05 L 165.517248 81.5 L 175.862076 45.800000000000004 L 186.206904 91.7 L 196.551732 68.9 L 206.89656 81.8 L 217.241388 49.25 L 227.58621599999998 36.5 L 237.93104399999999 67.85 L 248.275872 22.85000000000001 L 258.6207 20.450000000000003 L 268.965528 50 L 279.310356 35.75 L 289.65518399999996 81.8 L 300.00001199999997 18.650000000000006 V 95 H 0 L 0 63.349999999999994";
        var scale = path.getScale(attr);
        expect(expectD).to.equal(path.getClosedPath(scale, attr.data));
    });
});